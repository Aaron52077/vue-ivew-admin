(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["g-Cropper"],{"0159":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.currentValue?a("div",[a("sModal",{staticClass:"gc-dia-main",attrs:{width:"1000",transfer:"",closable:!1,"mask-closable":!1},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[a("div",{staticClass:"gc-dia-title",attrs:{slot:"header"},slot:"header"},[e._v("裁剪示例")]),a("div",{staticClass:"gc-dia-body",staticStyle:{position:"relative","min-height":"300px"}},[a("sUpload",{ref:"upload",staticStyle:{display:"inline-block",width:"92px"},attrs:{"show-upload-list":!1,"before-upload":e.handleBeforeUpload,format:["jpg","jpeg","png"],"max-size":200,action:e.dataBase.apihost+"/admin/file/upload","on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize}},[a("sButton",{attrs:{type:"info"}},[e._v("请选择图片")])],1),a("div",{staticClass:"wrapper"},[a("vue-cropper",{ref:"cropper",attrs:{img:e.myCropper.img,outputSize:e.myCropper.size,outputType:e.myCropper.outputType,info:e.myCropper.info,canScale:e.myCropper.canScale,autoCrop:e.myCropper.autoCrop,autoCropWidth:e.myCropper.width,autoCropHeight:e.myCropper.height}})],1)],1),a("div",{staticClass:"gc-dia-foot",attrs:{slot:"footer"},slot:"footer"},[a("sButton",{staticClass:"gc-btn-text gc-btn-no",attrs:{size:"large",type:"text",disabled:e.load},on:{click:e.handleCancel}},[e._v("取消")]),a("sButton",{staticClass:"gc-btn-text gc-btn-yes",attrs:{size:"large",type:"text",loading:e.load},on:{click:function(t){return e.handleFinish(e.fileType)}}},[e._v("确定")])],1)])],1):e._e()},r=[],i=a("7e79"),n={props:{size:Number,option:Object,value:{type:Boolean,default:!1},source:{type:String,default:""}},model:{prop:"value",event:"change"},components:{VueCropper:i["VueCropper"]},data:function(){return{fileName:"",fileType:"Blob",isShow:"",load:!1,myCropper:{img:"",info:!0,size:1,outputType:"png",canScale:!0,autoCrop:!0,width:150,height:150}}},computed:{currentValue:{get:function(){return this.value},set:function(e){this.$emit("change",e)}}},methods:{handleBeforeUpload:function(e){var t=this,a=new FileReader;if(e){a.readAsDataURL(e),a.onload=function(){t.myCropper.img=a.result};"".concat((e||{}).name)}},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"".concat(e.name,"格式不正确, 请上传jpg或png格式的图片")})},handleMaxSize:function(e){this.$Notice.warning({title:"超出最大图片上传限制",desc:"".concat(e.name,"文件超出限制, 单张图片不超过200KB")})},handleFinish:function(e){var t=this,a=this.myCropper.img;a&&""!==a?this.$refs.cropper.getCropData((function(a){var o=a;"Blob"===e?t.getCropBlob(a,(function(e){e})):a,t.myCropper.img="",t.currentValue=!1,t.$emit("on-ok",{url:o})})):this.$Message.error("请选择上传图片")},handleCancel:function(){var e={url:""};this.myCropper.img="",this.currentValue=!1,this.$emit("on-cancel",e)},getCropBlob:function(e,t){var a=e.split(","),o=a[0].match(/:(.*?);/)[1],r=atob(a[1]),i=r.length,n=new Uint8Array(i);while(i--)n[i]=r.charCodeAt(i);t(new Blob([n],{type:o}))},handleUpload:function(){var e={"Content-Type":"multipart/form-data",Authorization:"Bearer 12be9d0b-98d3-4d4b-a075-2a5d0eda10f3"},t={file:this.fileName};this.$http({method:"post",headers:e,url:"".concat(this.dataBase.apihost,"/admin/file/upload"),data:t}).then((function(e){console.log(e)}))}}},l=n,s=(a("c613"),a("2877")),p=Object(s["a"])(l,o,r,!1,null,null,null);t["default"]=p.exports},"35f9":function(e,t,a){var o=a("734a");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=a("499e").default;r("5249b83e",o,!0,{sourceMap:!1,shadowMode:!1})},"734a":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".wrapper{position:relative;margin-top:15px;width:100%;height:300px}",""])},c613:function(e,t,a){"use strict";a("35f9")}}]);