(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["g-Map-QQMap"],{"160c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.currentValue.open,expression:"currentValue.open"}]},[a("sModal",{staticClass:"gc-dia-main",attrs:{width:"1000",transfer:"","z-index":899},on:{"on-visible-change":e.handleOpen},model:{value:e.currentValue.open,callback:function(t){e.$set(e.currentValue,"open",t)},expression:"currentValue.open"}},[a("div",{staticClass:"gc-dia-title",attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.title||"位置"))]),a("div",{staticClass:"gc-dia-body",staticStyle:{position:"relative","min-height":"400px"}},[a("sRow",{staticClass:"gc-block__row",attrs:{gutter:16}},[a("sCol",{attrs:{xs:18,sm:18,lg:18}},[e._v("\n                    当前位置："+e._s(e.map_address||"-")+"\n                ")]),a("sCol",{directives:[{name:"show",rawName:"v-show",value:e.map_loaded,expression:"map_loaded"}],attrs:{xs:6,sm:6,lg:6}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.map_loaded,expression:"map_loaded"}],staticClass:"map-tip"},[a("input",{attrs:{autocomplete:"off",type:"text",id:"map_keyword"+e._uid,onfocus:"this.value = ''",placeholder:"搜索"}}),a("a",{attrs:{href:"javascript:;",onclick:"$(this).parents('.map-tip').find('input').focus()"}},[a("sIcon",{attrs:{type:"ios-close-circle",size:"14",color:"#999999"}})],1)])])],1),a("div",{staticClass:"gc-map__area"},[a("mLoading",{staticStyle:{height:"400px"},attrs:{visible:e.map_loaded?"":"loading"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.map_loaded,expression:"map_loaded"}],staticClass:"mapContainer",attrs:{id:"QQMap"+e._uid}})],1)],1),a("div",{staticClass:"gc-dia-foot",attrs:{slot:"footer"},slot:"footer"},[a("sButton",{staticClass:"gc-btn-no",attrs:{size:"large",type:"text"},on:{click:function(t){e.currentValue.open=!1}}},[e._v("取消")]),a("sButton",{staticClass:"gc-btn-text gc-btn-yes",attrs:{size:"large",type:"text"},on:{click:e.handleOk}},[e._v("确认")])],1)])],1)},o=[],i=a("4cc6"),s={data:function(){return{map:null,geocoder:null,map_point:"",map_address:"",map_getAddress:void 0,searchService:null,map_loaded:!1}},props:{title:{type:String,default:""},value:Object},model:{prop:"value",event:"change"},computed:{currentValue:{get:function(){return this.value||{}},set:function(e){this.$emit("change",e)}}},methods:{handleOk:function(){var e=this,t={open:!1,point:e.map_point,address:e.map_address};this.$emit("change",t)},handleOpen:function(e){var t=this;e&&(this.map_loaded=!1,Object(i["QQMapLib"])("OVABZ-5OARO-QW7WV-SJ2JP-T2AQE-BWBX2").then((function(e){t.map_init(e)})))},map_init:function(e){var t=this,a=t.currentValue.point?new e.maps.LatLng(t.currentValue.point[1],t.currentValue.point[0]):new e.maps.LatLng(30.54762,104.06498),n=new e.maps.place.Autocomplete(document.getElementById("map_keyword"+t._uid)),o="";t.map=new e.maps.Map(document.getElementById("QQMap"+t._uid),{zoom:16,center:a,minZoom:10,maxZoom:24,mapTypeId:e.maps.MapTypeId.ROADMAP,panControl:!0,panControlOptions:{position:e.maps.ControlPosition.RIGHT_CENTER}}),t.map_point=t.currentValue.point||[a.lng,a.lat],t.map_marker=new e.maps.Marker({position:a,map:t.map}),t.map_loaded=!0,t.geocoder=new e.maps.Geocoder({complete:function(e){t.map.setCenter(e.detail.location),t.map_address=e.detail.address,t.map_getAddress=function(e){t.map_point&&setTimeout((function(){t.map.panTo(t.map_point),t.map.panBy(0,50)}),e||300)}}}),e.maps.event.addListener(t.map,"click",(function(a){t.map_point=[a.latLng.getLng(),a.latLng.getLat()];var n=new e.maps.LatLng(a.latLng.lat,a.latLng.lng);t.map_marker.setPosition(a.latLng),t.geocoder.getAddress(n)})),t.searchService=new e.maps.SearchService({location:"成都",map:t.map,complete:function(a){for(var n=a.detail.pois,o=new e.maps.LatLngBounds,i=0,s=n.length;i<s;i++){var p=n[i];o.extend(p.latLng),t.map_marker.setPosition(p.latLng),t.map_marker.setTitle(p.name)}t.map.fitBounds(o)}}),e.maps.event.addListener(n,"confirm",(function(e){o=e.value,t.searchService.search(o)}))},clearOverlays:function(e){var t;while(t=e.pop())t.setMap(null)}}},p=s,r=(a("af6b"),a("2877")),l=Object(r["a"])(p,n,o,!1,null,"0040ffc8",null);t["default"]=l.exports},"162c":function(e,t,a){var n=a("b39b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a("499e").default;o("58273d02",n,!0,{sourceMap:!1,shadowMode:!1})},af6b:function(e,t,a){"use strict";a("162c")},b39b:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".mapContainer[data-v-0040ffc8]{width:100%;height:400px}.gc-map__area[data-v-0040ffc8]{position:relative}.gc-block__row[data-v-0040ffc8]{margin:0 0 10px}.map-tip[data-v-0040ffc8]{position:relative;color:#333;border-radius:3px;border:1px solid #eee;-webkit-box-shadow:1px 2px 4px 0 #eee;box-shadow:1px 2px 4px 0 #eee}.map-tip a[data-v-0040ffc8]{display:inline-block;position:absolute;border-radius:0 3px 3px 0;right:5px;top:1px;width:28px;text-align:center;line-height:28px;height:28px}.map-tip input[type=text][data-v-0040ffc8]{height:30px;border:0;padding-left:12px;width:100%;border-radius:3px;outline:none}",""])}}]);